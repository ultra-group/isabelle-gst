<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"/><link rel="stylesheet" type="text/css" href="isabelle.css"/>
<title>File ‹Tools/class_tools.ML›</title>
</head>


<body>
<div class="head">
<h1>File ‹Tools/class_tools.ML›</h1>
</div>

<pre class="source"><span class="comment1">(*Functions that allow interactions with Isar's locale interface.
  See src/Pure/Isar/
    class.ML, class_declaration.ML, element.ML, 
  and src/Pure/
    axclass.ML
  See Isar Reference Manual - Sec 5.8 *)</span>

<span class="comment1">(*Each class is identified with a ‹string›*)</span>
<span class="keyword1"><span class="keyword">val</span></span> <span class="entity">get_class</span> <span class="main">=</span> Proof_Context.read_class

<span class="comment1">(*TODO: DOCUMENT --- SAME BUT FOR CLASSES*)</span>
<span class="keyword1"><span class="keyword">fun</span></span> <span class="entity">mk_class</span> <span class="entity">name</span> <span class="entity">imports</span> <span class="entity">fixes</span> <span class="entity">assms</span> <span class="entity">lthy</span> <span class="main">=</span> 
  <span class="keyword2"><span class="keyword">let</span></span> <span class="keyword1"><span class="keyword">val</span></span> <span class="entity">thy</span> <span class="main">=</span> Local_Theory.exit_global <span class="entity">lthy</span> 
      <span class="keyword1"><span class="keyword">val</span></span> <span class="entity">fixes'</span> <span class="main">=</span> <span class="entity">Element.Fixes</span> <span class="main">(</span>map <span class="entity">mk_fix</span> <span class="entity">fixes</span><span class="main">)</span>
      <span class="keyword1"><span class="keyword">val</span></span> <span class="entity">assms'</span> <span class="main">=</span> <span class="entity">Element.Assumes</span> <span class="main">(</span>map <span class="entity">mk_assm</span> <span class="entity">assms</span><span class="main">)</span> 
  <span class="keyword2"><span class="keyword">in</span></span> <span class="entity">Class_Declaration.class</span> <span class="main">(</span>Binding.name <span class="entity">name</span><span class="main">)</span> <span class="main">[</span><span class="main">]</span> <span class="entity">imports</span> <span class="main">[</span><span class="entity">fixes'</span><span class="main">,</span> <span class="entity">assms'</span><span class="main">]</span> <span class="entity">thy</span> <span class="keyword2"><span class="keyword">end</span></span> 

<span class="keyword1"><span class="keyword">fun</span></span> <span class="entity">ofclass_form</span> <span class="entity">ctxt</span> <span class="entity">typ</span> <span class="entity">cla</span> <span class="main">=</span> 
  <span class="keyword2"><span class="keyword">let</span></span> <span class="keyword1"><span class="keyword">val</span></span> <span class="entity">name</span> <span class="main">=</span> <span class="main">(</span><span class="entity">get_class</span> <span class="entity">ctxt</span> <span class="entity">cla</span><span class="main">)</span> ^ <span class="inner_quoted">"_class"</span>
      <span class="keyword1"><span class="keyword">val</span></span> <span class="entity">t_itself</span> <span class="main">=</span> Type <span class="main">(</span><span class="inner_quoted">"itself"</span><span class="main">,</span> <span class="main">[</span><span class="entity">typ</span><span class="main">]</span><span class="main">)</span>
      <span class="keyword1"><span class="keyword">val</span></span> <span class="entity">pure_typ</span> <span class="main">=</span> Const <span class="main">(</span><span class="inner_quoted">"Pure.type"</span><span class="main">,</span> <span class="entity">t_itself</span><span class="main">)</span>
  <span class="keyword2"><span class="keyword">in</span></span> Const <span class="main">(</span><span class="entity">name</span><span class="main">,</span> <span class="entity">t_itself</span> --&gt; <span class="antiquoted"><span class="antiquote">@{</span><span class="operator">typ</span> <span class="quoted">prop</span><span class="antiquote">}</span></span><span class="main">)</span> $ <span class="entity">pure_typ</span> <span class="keyword2"><span class="keyword">end</span></span> 

<span class="keyword1"><span class="keyword">fun</span></span> <span class="entity">class_params</span> <span class="entity">thy</span> <span class="entity">cla</span> <span class="main">=</span> <span class="main">#</span>params <span class="main">(</span><span class="entity">Axclass.get_info</span> <span class="entity">thy</span> <span class="entity">cla</span><span class="main">)</span>


</pre>
</body>

</html>